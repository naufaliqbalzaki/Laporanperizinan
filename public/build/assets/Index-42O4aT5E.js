import{r as s,j as t,A as h,y as F,Y as M}from"./app-BNDjhMuB.js";import{D as C,a as b}from"./DataTableColumnHeader-Bk0Uevxh.js";import{C as k,D as B}from"./checkbox-C766lKJB.js";import{_ as x,c as T,B as w}from"./button-CCRufjy2.js";import{$ as L,b as z,c as O,d as v,e as G,D as H,P as J,C as q,f as U}from"./index-CfjhtM0k.js";import{$ as I,a as Y,b as Q,A as W}from"./AuthenticatedLayout-dr0awWZy.js";import{$}from"./index-4OSEfcuy.js";import{$ as X}from"./index-BKwPXhZW.js";import{ImportForm as Z}from"./_import_form-DgF_0qGk.js";import"./popover-BxgEQXH-.js";import"./input-CvkLJe1c.js";import"./alert-dialog-DoAyoDaK.js";import"./separator-CF24yGVN.js";import"./InputError-DyL1GXD6.js";import"./label-lpIPan_A.js";import"./index-CWQ7p_Ha.js";const P="Tabs",[ee,Ie]=L(P,[I]),S=I(),[te,_]=ee(P),ae=s.forwardRef((n,e)=>{const{__scopeTabs:a,value:o,onValueChange:c,defaultValue:r,orientation:i="horizontal",dir:u,activationMode:m="automatic",...g}=n,l=X(u),[d,f]=z({prop:o,onChange:c,defaultProp:r});return s.createElement(te,{scope:a,baseId:O(),value:d,onValueChange:f,orientation:i,dir:l,activationMode:m},s.createElement($.div,x({dir:l,"data-orientation":i},g,{ref:e})))}),ne="TabsList",se=s.forwardRef((n,e)=>{const{__scopeTabs:a,loop:o=!0,...c}=n,r=_(ne,a),i=S(a);return s.createElement(Y,x({asChild:!0},i,{orientation:r.orientation,dir:r.dir,loop:o}),s.createElement($.div,x({role:"tablist","aria-orientation":r.orientation},c,{ref:e})))}),re="TabsTrigger",oe=s.forwardRef((n,e)=>{const{__scopeTabs:a,value:o,disabled:c=!1,...r}=n,i=_(re,a),u=S(a),m=D(i.baseId,o),g=R(i.baseId,o),l=o===i.value;return s.createElement(Q,x({asChild:!0},u,{focusable:!c,active:l}),s.createElement($.button,x({type:"button",role:"tab","aria-selected":l,"aria-controls":g,"data-state":l?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:m},r,{ref:e,onMouseDown:v(n.onMouseDown,d=>{!c&&d.button===0&&d.ctrlKey===!1?i.onValueChange(o):d.preventDefault()}),onKeyDown:v(n.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&i.onValueChange(o)}),onFocus:v(n.onFocus,()=>{const d=i.activationMode!=="manual";!l&&!c&&d&&i.onValueChange(o)})})))}),ce="TabsContent",ie=s.forwardRef((n,e)=>{const{__scopeTabs:a,value:o,forceMount:c,children:r,...i}=n,u=_(ce,a),m=D(u.baseId,o),g=R(u.baseId,o),l=o===u.value,d=s.useRef(l);return s.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),s.createElement(G,{present:c||l},({present:f})=>s.createElement($.div,x({"data-state":l?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!f,id:g,tabIndex:0},i,{ref:e,style:{...n.style,animationDuration:d.current?"0s":void 0}}),f&&r))});function D(n,e){return`${n}-trigger-${e}`}function R(n,e){return`${n}-content-${e}`}const le=ae,A=se,E=oe,K=ie,de=le,V=s.forwardRef(({className:n,...e},a)=>t.jsx(A,{ref:a,className:T("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...e}));V.displayName=A.displayName;const j=s.forwardRef(({className:n,...e},a)=>t.jsx(E,{ref:a,className:T("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...e}));j.displayName=E.displayName;const y=s.forwardRef(({className:n,...e},a)=>t.jsx(K,{ref:a,className:T("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));y.displayName=K.displayName;function ue({appUrl:n}){return[{id:"select",header:({table:e})=>t.jsx(k,{checked:e.getIsAllPageRowsSelected()||e.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>e.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:e})=>t.jsx(k,{checked:e.getIsSelected(),onCheckedChange:a=>e.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"number",meta:"No. Online",header:({column:e})=>t.jsx(b,{column:e,title:"No. Online"})},{accessorKey:"from",meta:"Nama Pemohon",header:({column:e})=>t.jsx(b,{column:e,title:"Nama Pemohon"}),cell(e){const a=e.getValue();return a.length>50?a.slice(0,50)+"...":a}},{accessorKey:"instance_name",meta:"Dinas",header:({column:e})=>t.jsx(b,{column:e,title:"Dinas"})},{accessorKey:"subject",meta:"Perizinan",header:({column:e})=>t.jsx(b,{column:e,title:"Perizinan"}),cell(e){const a=e.getValue();return a.length>100?a.slice(0,100)+"...":a}},{accessorKey:"issue_date",meta:"Tanggal Terbit",header:({column:e})=>t.jsx(b,{column:e,title:"Tanggal Terbit"}),filterFn:"dateRangeFilter",cell(e){return new Date(e.getValue()).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}},{accessorKey:"verification_date",meta:"Tanggal Verifikasi",header:({column:e})=>t.jsx(b,{column:e,title:"Tanggal Verifikasi"}),filterFn:"dateRangeFilter",cell(e){return new Date(e.getValue()).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}},{accessorKey:"is_next",meta:"Status",header:({column:e})=>t.jsx(b,{column:e,title:"Status"}),cell:({row:e})=>{const a=e.original.next_action?"Lanjut":"Kembali";return t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("p",{className:`text-${a==="Lanjut"?"green":"red"}-500`,children:a}),a==="Lanjut"?t.jsx(q,{className:"text-green-500 size-4"}):t.jsx(U,{className:"text-red-500 size-4"})]})}},{id:"actions",header(){return t.jsx("div",{className:"text-center",children:"Aksi"})},cell:({row:e})=>t.jsx(B,{row:e,name:"documents"})}]}function be(){return[{accessorKey:"from",meta:"Nama Pemohon",header:({column:n})=>t.jsx(b,{column:n,title:"Nama Pemohon"})},{accessorKey:"subject",meta:"Perizinan",header:({column:n})=>t.jsx(b,{column:n,title:"Perizinan"})},{accessorKey:"issue_date",meta:"Tanggal Terbit",header:"",filterFn:"dateRangeFilter",cell(n){return null}},{accessorKey:"verification_date",meta:"Tanggal Verifikasi",header:"",filterFn:"dateRangeFilter",cell(n){return null}},{accessorKey:"corrective_action_count",meta:"Jumlah Berkas Kembali",header:({column:n})=>t.jsx(b,{column:n,title:"Jumlah Berkas Kembali"}),cell(n){const e=n.getValue();return e===0?"-":e+" Kali"}},{accessorKey:"corrective_action_last_date",meta:"Tanggal Terakhir Perbaikan",header:({column:n})=>t.jsx(b,{column:n,title:"Tanggal Terakhir Perbaikan"}),cell(n){const e=n.getValue();return e?new Date(e).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}}]}function Pe({appUrl:n,auth:e,doc_type:a,documents:o,summary:c,flash:r}){const[i,u]=s.useState(!1),m=ue({appUrl:n}),g=be(),[l,d]=s.useState(void 0);s.useEffect(()=>{u(!1),h.dismiss(),r!=null&&r.success&&h.success(r.success),r!=null&&r.error&&h.error(r.error)},[r]);const f=o.length,N=a==="central"?` Pusat (${f})`:` Timur (${f})`;return typeof c=="object"&&(c=Object.keys(c).map(p=>c[p])),t.jsxs(W,{user:e.user,header:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:["Berkas Masuk",N]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("a",{href:route("documents.file.export",{doc_type:a,ids:l==null?void 0:l.rows.map(p=>parseInt(p.original.id))}),children:t.jsxs(w,{variant:"secondary",type:"button",children:[t.jsx(H,{className:"w-5 h-5"}),"Export"]})}),t.jsx(Z,{doc_type:a,setImportOpen:u,importOpen:i}),t.jsxs(w,{className:"flex items-center gap-2",onClick:()=>F.visit(`/documents/create?type=${a}`),children:[t.jsx(J,{className:"w-5 h-5"}),"Buat Baru"]})]})]}),children:[t.jsx(M,{title:`Berkas Masuk ${N}`}),t.jsx("div",{className:"px-8 pb-8 mx-auto max-w-[1728px]",children:t.jsxs(de,{defaultValue:"all",children:[t.jsxs(V,{className:"grid w-full grid-cols-2 mb-4",children:[t.jsx(j,{value:"all",children:"Semua"}),t.jsx(j,{value:"summary",children:"Ringkasan"})]}),t.jsx(y,{value:"all",children:t.jsx(C,{columns:m,data:o,name:"documents",doc_type:"central",searchParam:"from",setFilteredData:d})}),t.jsx(y,{value:"summary",children:t.jsx(C,{columns:g,data:c.filter(p=>p.corrective_action_count>0),name:"documents",doc_type:"central",searchParam:"from",setFilteredData:d})})]})})]})}export{Pe as default};

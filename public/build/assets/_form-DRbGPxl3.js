import{r as _,j as e,W as L}from"./app-BNDjhMuB.js";import{I as n}from"./InputError-DyL1GXD6.js";import{c as N,B as j}from"./button-CCRufjy2.js";import{S as g,a as p,b as f,c as b,d as v,e as o,P as w,f as S,g as C,C as y}from"./popover-BxgEQXH-.js";import{I as d}from"./input-CvkLJe1c.js";import{L as l}from"./label-lpIPan_A.js";import{g as D}from"./index-CfjhtM0k.js";import"./index-BKwPXhZW.js";import"./index-4OSEfcuy.js";import"./index-CWQ7p_Ha.js";const k=_.forwardRef(({className:h,...c},s)=>e.jsx("textarea",{className:N("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",h),ref:s,...c}));k.displayName="Textarea";const G=({userId:h,docType:c,document:s,instances:q})=>{const[x,u]=_.useState("");s&&(s.issue_date&&(s.issue_date=new Date(s.issue_date)),s.verification_date&&(s.verification_date=new Date(s.verification_date)));const{data:i,setData:t,post:P,processing:F,errors:r}=L(s||{user_id:h,instance_id:"",doc_type:c,number:"",issue_date:new Date,verification_date:new Date,subject:"",from:"",file:new File([],"file"),phone:"",next_action:"",corrective_action:"",description:"",petugas:"",_method:"post"}),T=a=>{u(a)},I=a=>{a.preventDefault(),t("corrective_action",x),t("doc_type",c),s&&s.id?(i._method="put",P(route("documents.update",s.id),{forceFormData:!0})):(i._method="post",P(route("documents.store")))};return _.useEffect(()=>{s?(t("instance_id",s.instance_id),t("number",s.number),t("doc_type",s.doc_type),t("issue_date",s.issue_date),t("verification_date",s.verification_date),t("from",s.from),t("subject",s.subject),t("file",s.file),t("phone",s.phone),t("next_action",s.next_action),t("corrective_action",s.corrective_action||""),t("description",s.description),t("petugas",s.petugas),u(s.corrective_action||"")):t("doc_type",c)},[s,c,t]),e.jsxs("form",{onSubmit:I,children:[e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"number","aria-required":!0,required:!0,children:"No. Online"}),e.jsx(d,{id:"number",type:"text",name:"number",value:i.number,className:"block w-full mt-1",onChange:a=>t("number",a.target.value)}),e.jsx(n,{message:r.number,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"from","aria-required":!0,required:!0,children:"Nama Pemohon"}),e.jsx(d,{id:"from",type:"text",name:"from",value:i.from,className:"block w-full mt-1",onChange:a=>t("from",a.target.value)}),e.jsx(n,{message:r.from,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"subject","aria-required":!0,required:!0,children:"Perizinan"}),e.jsx(k,{id:"subject",name:"subject",value:i.subject,className:"block w-full mt-1",onChange:a=>t("subject",a.target.value)}),e.jsx(n,{message:r.subject,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"instance_id","aria-required":!0,required:!0,children:"Dinas"}),e.jsxs(g,{value:i.instance_id,onValueChange:a=>{a==="batalkan"?t("instance_id",""):t("instance_id",a)},children:[e.jsx(p,{className:"mt-2",children:e.jsx(f,{placeholder:"Pilih Dinas"})}),e.jsx(b,{children:e.jsxs(v,{children:[q.map(a=>e.jsx(o,{value:a.id.toString(),children:a.name},a.id)),e.jsx(o,{value:"batalkan",children:"Batalkan Pilihan"},"batalkan")]})})]}),e.jsx(n,{message:r.instance_id,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"next_action",children:"Status Lanjut"}),e.jsxs(g,{value:i.next_action,onValueChange:a=>{a==="batalkan"?(t("next_action",""),u("")):(t("next_action",a),a&&u(""))},disabled:x!=="",children:[e.jsx(p,{className:"mt-2",children:e.jsx(f,{placeholder:"Pilih Status Lanjut"})}),e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(o,{value:"batalkan",children:"Pilih Status"},"batalkan"),e.jsx(o,{value:"Lanjut Ke OPD",children:"Lanjut Ke OPD"},"lanjut_ke_opd")]})})]}),e.jsx(n,{message:r.next_action,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"corrective_action",children:"Status Kembali"}),e.jsxs(g,{value:x,onValueChange:a=>{a==="batalkan"?u(""):T(a)},disabled:i.next_action!=="",children:[e.jsx(p,{className:"mt-2",children:e.jsx(f,{placeholder:"Pilih Status Kembali"})}),e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(o,{value:"batalkan",children:"Pilih Status"},"batalkan"),e.jsx(o,{value:"Analisa Pengembalian Berkas",children:"Analisa Pengembalian Berkas"},"analisa_pengembalian_berkas"),e.jsx(o,{value:"Pengembalian PTSP",children:"Pengembalian PTSP"},"pengembalian_ptsp"),e.jsx(o,{value:"Pengembalian OPD",children:"Pengembalian OPD"},"pengembalian_opd"),e.jsx(o,{value:"Berkas Di Nonaktifkan",children:"Berkas Di Nonaktifkan"},"berkas_di_nonaktifkan"),e.jsx(o,{value:"SK Terbit",children:"SK Terbit"},"sk_terbit")]})})]}),e.jsx(n,{message:r.corrective_action,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx(l,{htmlFor:"issue_date","aria-required":!0,required:!0,children:"Tanggal Terbit"}),e.jsxs(w,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:N("w-[280px] justify-start text-left font-normal",!i.issue_date&&"text-muted-foreground"),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),i.issue_date?`${i.issue_date.toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:e.jsx("span",{children:"Pilih Tanggal Terbit"})]})}),e.jsxs(C,{className:"w-auto p-0",children:[e.jsx(y,{mode:"single",selected:i.issue_date,onSelect:a=>{a&&t("issue_date",a)},initialFocus:!0})," ",e.jsx(d,{type:"time",className:"mt-2 bg-neutral-50 border leading-none border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ",value:i.issue_date.toLocaleTimeString([],{hourCycle:"h23",hour:"2-digit",minute:"2-digit"}),onChange:a=>{const m=i.issue_date;m.setHours(parseInt(a.target.value.split(":")[0]),parseInt(a.target.value.split(":")[1]),0),t("issue_date",m)}})]})]}),e.jsx(n,{message:r.issue_date,className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx(l,{htmlFor:"verification_date","aria-required":!0,required:!0,children:"Tanggal Verifikasi"}),e.jsxs(w,{children:[e.jsx(S,{asChild:!0,children:e.jsxs(j,{variant:"outline",className:N("w-[280px] justify-start text-left font-normal",!i.verification_date&&"text-muted-foreground"),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),i.verification_date?`${i.verification_date.toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}`:e.jsx("span",{children:"Pilih Tanggal Verifikasi"})]})}),e.jsxs(C,{className:"w-auto p-0",children:[e.jsx(y,{mode:"single",selected:i.verification_date,onSelect:a=>{a&&t("verification_date",a)},initialFocus:!0})," ",e.jsx(d,{type:"time",className:"mt-2 bg-neutral-50 border leading-none border-neutral-300 text-neutral-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-neutral-700 dark:border-neutral-600 dark:placeholder-neutral-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 ",value:i.verification_date.toLocaleTimeString([],{hourCycle:"h23",hour:"2-digit",minute:"2-digit"}),onChange:a=>{const m=i.verification_date;m.setHours(parseInt(a.target.value.split(":")[0]),parseInt(a.target.value.split(":")[1]),0),t("verification_date",m)}})]})]}),e.jsx(n,{message:r.verification_date,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"description",children:"Keterangan"}),e.jsx(k,{id:"description",name:"description",value:i.description,className:"block w-full mt-1",onChange:a=>t("description",a.target.value)}),e.jsx(n,{message:r.description,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"phone","aria-required":!0,required:!0,children:"No. Telepon"}),e.jsx(d,{id:"phone",type:"text",name:"phone",value:i.phone,className:"block w-full mt-1",onChange:a=>t("phone",a.target.value)}),e.jsx(n,{message:r.phone,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"from","aria-required":!0,required:!0,children:"Nama Verifikator"}),e.jsx(d,{id:"petugas",type:"text",name:"petugas",value:i.petugas,className:"block w-full mt-1",onChange:a=>t("from",a.target.value)}),e.jsx(n,{message:r.petugas,className:"mt-2"})]}),e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx(j,{type:"submit",className:"w-full mt-2",disabled:F,children:s?"Ubah":"Buat"})})]})};export{G as DocumentForm};
